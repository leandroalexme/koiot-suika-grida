(function(t,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(t=typeof globalThis<"u"?globalThis:t||self,o(t.KoiotCommon={}))})(this,function(t){"use strict";class o{constructor(){this.listeners=new Map}on(e,n){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n)}off(e,n){const r=this.listeners.get(e);r&&(r.delete(n),r.size===0&&this.listeners.delete(e))}emit(e,...n){const r=this.listeners.get(e);r&&r.forEach(s=>{try{s(...n)}catch(w){console.error(`Error in event listener for "${String(e)}":`,w)}})}removeAllListeners(){this.listeners.clear()}}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i==="x"?e:e&3|8).toString(16)})}function c(){return window.devicePixelRatio||1}function f(i){let e=null,n;return(...r)=>{n=r,e===null&&(e=requestAnimationFrame(()=>{i(...n),e=null}))}}function u(i,e,n){return Math.min(Math.max(i,e),n)}function a(i,e,n){return i>=n.x&&i<=n.x+n.width&&e>=n.y&&e<=n.y+n.height}function x(i,e,n,r,s){return{x:(i-r)*n,y:(e-s)*n}}function d(i,e,n,r,s){return{x:i/n+r,y:e/n+s}}function h(){}function m(){let i=0;return()=>(++i).toString()}function g(){}function y(){}function v(){return navigator.platform.indexOf("Win")>-1}t.EventEmitter=o,t.arrayUtil=g,t.clamp=u,t.commonUtils=y,t.genUuid=l,t.getDevicePixelRatio=c,t.increaseIdGenerator=m,t.isPointInRect=a,t.isWindows=v,t.noop=h,t.rafThrottle=f,t.sceneToViewport=x,t.viewportToScene=d,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
